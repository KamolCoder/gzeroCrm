{% extends 'base.html' %}

{% block title%}
{{title}}
{% endblock title%}

{% block main %}
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
<h3>Мероприятии</h3>
<button class="btn btn-success"
        style="box-shadow: 0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)!important">
    <a href="{% url 'add_event' %}" style="color: white;text-decoration: none"><i class="bi bi-person-plus-fill"></i>Добавить</a>
</button>

{% if events %}
<div class="mt-5 mb-3 p-3 button-container bg-white border shadow-sm">
    <div class="row row-cols-1 row-cols-md-5 g-4">
        {% for event in events %}
        <div class="col">
            <div class="card h-100">
                <img src="{{event.get_image}}" class="card-img-top" style="height:300px;object-fit: cover">
                <div class="card-body">

                    <div style="display: flex;justify-content: space-between;">
                        <small class="text-body-secondary">{{event.event_start_date}}</small>
                        <span class="badge text-bg-success">Локация: {{event.event_locate}}</span>
                    </div>
                    <h5 class="card-title">{{event.title}}</h5>
                    <p class="card-text">{{ event.event_description|truncatechars:50 }}</p>
                </div>
                <div class="m-1"
                     style="display:flex;   height:40px; align-items: center;justify-content: space-between;">
                    <div>
                        {% for event_member in event.eventmembers.all %}
                        {% for client in event_member.members.all|slice:":5" %}
                        <a href="{{ client.get_absolute_url }}"><img src="{{ client.get_image }}" class="rounded-circle"
                                                                     width="40" height="40"></a>
                        {% endfor %}
                        {% endfor %}
                    </div>
                    <a href="{{event.get_absolute_url}}" style="margin:2px;color:grey "><i
                            class="bi bi-pencil-square"></i></a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{%endif %}


{% endblock main %}
